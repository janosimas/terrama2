<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>TerraMA² Monitor</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" type="text/css" href="{[ BASE_URL ]}bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="{[ BASE_URL ]}AdminLTE/dist/css/AdminLTE.min.css">
    <link rel="stylesheet" type="text/css" href="{[ BASE_URL ]}AdminLTE/dist/css/skins/skin-black.min.css">
    <link rel="stylesheet" type="text/css" href="{[ BASE_URL ]}ol3/ol.css">
    <link rel="stylesheet" type="text/css" href="{[ BASE_URL ]}TerraMA2WebComponents.min.css">
    <link rel="stylesheet" type="text/css" href="{[ BASE_URL ]}dist/TerraMA2WebMonitor.min.css">
    <link rel="stylesheet" type="text/css" href="{[ BASE_URL ]}jquery-ui/themes/base/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="{[ BASE_URL ]}datatables/media/css/dataTables.bootstrap.css">
    <link rel="stylesheet" type="text/css" href="{[ BASE_URL ]}bootstrap-daterangepicker/daterangepicker.css" />
  </head>
  <body class="hold-transition skin-black sidebar-mini">
    <div class="wrapper">

      <!-- Main Header -->
      <header id="terrama-header" class="main-header">
        <!-- Logo -->
        <a href="#" class="logo">
          <!-- mini logo for sidebar mini 50x50 pixels -->
          <div class="logo-lg"><img src="{[ BASE_URL ]}images/terrama2_logo2.png" class="img-square" alt="User Image"><b>  TerraMA²</b></div>
          <!-- logo for regular state and mobile devices -->
          <div class="logo-mini"><img src="{[ BASE_URL ]}images/terrama2_logo2.png" class="img-square" alt="User Image"></div>
        </a>
        <!-- Header Navbar -->
        <nav id="nav" class="navbar navbar-static-top" role="navigation">
          <!-- Sidebar toggle button-->
          <a href="#" class="sidebar-toggle" full_screen="true" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
          </a>
          <div style="text-align:center">
            <span class="imgs"><img src="{[ BASE_URL ]}images/inpe.png"></span>
            <span class="imgs"><img src="{[ BASE_URL ]}images/defra.png"></span>
            <span class="imgs"><img src="{[ BASE_URL ]}images/banco_mundial.png"></span>
            <span class="imgs"><img id="mma" src="{[ BASE_URL ]}images/mma.png"></span>
            <span class="imgs"><img src="{[ BASE_URL ]}images/funcate.png"></span>

            {% if (currentUser !== null) %}
            <div class="navbar-custom-menu" id="user-nav">
              <ul class="nav navbar-nav">
                <li class="dropdown user user-menu">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                    <span class="hidden-xs user-name">{[ currentUser.name ]}</span>
                  </a>
                  <ul class="dropdown-menu">
                    <li class="user-header" style="height: auto;">
                      <p class="user-name">{[ currentUser.name ]}</p>
                    </li>
                    <li class="user-footer">
                      <div class="pull-right"><a href="{[ BASE_URL ]}logout" class="btn btn-default btn-flat" id="signout">Sign out</a></div>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
            {% endif %}
            {% if (currentUser === null) %}
            <div class="navbar-custom-menu" id="login-nav">
              <ul class="nav navbar-nav">
                <li class="dropdown user user-menu">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                    <span class="hidden-xs">Login</span>
                  </a>
                  <ul class="dropdown-menu">
                    <li class="user-body">
                      <form method="POST" action="{[ BASE_URL ]}login">
                        <div class="form-group has-feedback">
                          <input type="text" class="form-control" placeholder="Username" name="username" id="username">
                          <span class="fa fa-user form-control-feedback"></span>
                        </div>
                        <div class="form-group has-feedback">
                          <input type="password" class="form-control" placeholder="Password" name="password" id="password">
                          <span class="fa fa-key form-control-feedback"></span>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <button type="submit" name="btnLogin" class="btn btn-primary btn-block btn-flat" id="signin">
                              <span ng-bind="i18n.__('Sign In')" class="ng-binding">Sign In</span>
                            </button>
                          </div>
                        </div>
                      </form>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
            {% endif %}
          </div>
        </nav>
      </header>
      
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

          <!-- Sidebar Menu -->
          <ul class="sidebar-menu">
            <div class="form-group" style="margin: 10px;">
              <label>Projects:</label>
              <select class="form-control" id="projects" name="projects"></select>
            </div>
            <li class="header">VIEWS</li>
            <!-- Optionally, you can add icons to the links -->
            <div id="terrama2-layerexplorer"></div>
            <form onsubmit="return false" class="form-inline"> 
                <div class="form-group">
                    <input id='wmsUri' class="form-control" type='search' placeholder='WMS URI'> <button id='addLayers' type='submit' class="btn btn-default">Add</button>
                </div>
            </form>
            <li class="header">VISIBLE LAYERS</li>
            <div id="terrama2-sortlayers"></div>
          </ul>
          <!-- /.sidebar-menu -->
        </section>
        <!--
        <div id="mini-toggle" data-toggle="offcanvas">
           <span class="glyphicon glyphicon-menu-left"></span> 
        </div>
        -->
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">

        <!-- Main content -->
        <div id="content" class="content">
          <div id="show-menu">
            <a href="#" class="sidebar-toggle" data-toggle="offcanvas" full_screen="true" role="button">
              <span class="sr-only">Toggle navigation</span>
            </a>
          </div>
          {% set webadminHostInfo = webadminHostInfo || {} %}
          {% set webmonitorHostInfo = webmonitorHostInfo || {} %}
          {% set message = message || {} %}

          <div id="terrama2-map" class="terrama2-map cursor-move">
              <div id="legend-box">
                <div class="legend-header">Legends</div>
                <div class="legend-body"><strong>No data to show.</strong></div>
              </div>
              <div id="layer-toolbox" class="hidden">
                <div class="layer-toolbox-header"><span class="layer-name"></span> - Layer Tools<span class="btn btn-default" style="padding: 0 4px 0 4px; float: right;"><i class="fa fa-close"></i></span></div>
                <div class="layer-toolbox-body">
                  <div id="slider-box"></div>
                  <hr class="hidden"/>
                  <div id="exportation-box" class="hidden">
                    <select multiple id="exportation-type" class="form-control">
                      <option value="all">All Formats</option>
                      <option selected value="csv">CSV</option>
                      <option value="geojson">GeoJSON</option>
                      <option value="kml">KML</option>
                      <option value="shapefile">Shapefile</option>
                    </select>
                    <button id="export" type="button" class="btn btn-default" style="margin-top: 10px;">Export Data</button>
                  </div>
                </div>
              </div>
              <div id="map-tools">
                  <div id="moveMap" class="map-tool-button mouse-function-btn active"><button type="button"><i class="fa fa-hand-rock-o"></i></button></div>
                  <div id="legendsButton" class="map-tool-button mouse-function-btn"><button type="button"><i class="fa fa-list"></i></button></div>
                  <div id="tableButton" class="map-tool-button mouse-function-btn hidden"><button type="button"><i class="fa fa-table"></i></button></div>
                  <div id="getAttributes" class="map-tool-button mouse-function-btn hidden">
                      <select class="form-control hidden"></select>
                      <button type="button"><i class="fa fa-info"></i></button>
                  </div>
              </div>
              <div id="table-div" style="display: none; height: 400px;">
                  <div class="main-div hidden">
                      <div id="attributes-table-select">
                          <span>Layers:</span>
                          <select class="form-control"></select>
                      </div>
                      <div style="clear: both; height: 5px;"></div>
                      <hr/>
                      <div style="clear: both; height: 5px;"></div>
                      <div id="attributes-table-div">
                          <table class="table table-bordered table-hover" id="attributes-table"></table>
                      </div>
                  </div>
              </div>
          </div>

          <!-- Alert message -->
          <div id="terrama2Alert" class="alert alert-danger hide">
            <a href="#" id="close-alert" class="close" aria-label="close">&times;</a>
            <p><strong></strong> <span></span></p>
          </div>

          <!-- Layers Modal -->
          <div class="modal fade" id="layersModal" tabindex="-1" role="dialog" aria-labelledby="layersModalLabel">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title" id="layersModalLabel">Layers</h4>
                </div>
                <div id="layersModalBody" class="modal-body"></div>
                <div class="modal-footer">
                  <button id="closeLayers" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  <button id="saveLayers" type="button" class="btn btn-primary">Save changes</button>
                </div>
              </div>
            </div>
          </div>

          <div id="feature-info-box"></div>
        </div>
        <!-- /.content -->
      </div>
      <!-- /.content-wrapper -->

      <!-- Main Footer -->
      <footer class="main-footer"></footer>
      <footer class="footer-monitor"></footer>
    </div>
    <script type="text/javascript" src="{[ BASE_URL ]}moment/moment.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}jquery-ui/jquery-ui.min.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}bootstrap-daterangepicker/daterangepicker.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}ol3/ol.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}socket.io/socket.io.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}datatables/media/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}datatables/media/js/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}underscore/underscore-min.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="{[ BASE_URL ]}AdminLTE/dist/js/app.min.js"></script>
    <script>
      var BASE_URL = "{[ BASE_URL ]}";
      var webadminHostInfo = {[webadminHostInfo|json|safe]};
      var webmonitorHostInfo = {[webmonitorHostInfo|json|safe]};
      var message = "{[message.content]}";
      var userLogged = {[ currentUser !== null ? "true" : "false" ]};
    </script>
    <script type="text/javascript" src="{[ BASE_URL ]}dist/TerraMA2WebMonitor.min.js"></script>
    <!--<script type="text/javascript" data-main="{[ BASE_URL ]}javascripts/Startup.js" src="{[ BASE_URL ]}require.js"></script>-->
    <iframe id="exportation-iframe" class="hidden"></iframe>
  </body>
</html>
